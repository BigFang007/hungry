<template>
  <div>
    <!-- å¿«æ·å¯¼èˆª start-->
    <section class="shortcut">
      <div class="w">
        <!-- å·¦ -->
        <div class="fl">
          <ul>
            <li>å…‰é‡èµç½‘æ¬¢è¿é€†å­ä»¬!&nbsp;&nbsp;</li>
            <!-- æœªç™»é™† -->
            <li v-if="!username">
              <!-- ç™»é™†æœ‰è·¯ç”±è·³è½¬ï¼Œå°†aè½¬ä¸ºrouterlink -->
              <router-link to="/login">è¯·ç™»å½•</router-link>&nbsp;
              <router-link to="/register" class="style_red"
                >å…è´¹æ³¨å†Œ</router-link
              >
            </li>
            <!-- å·²ç™»é™† -->
            <li v-else>
              {{ username }}
              <a class="style_red" @click="logout">é€€å‡ºç™»é™†</a>
            </li>
          </ul>
        </div>
        <!-- å³ -->
        <div class="fr">
          <ul>
            <li>æˆ‘çš„è®¢å•</li>
            <li>|</li>
            <li class="arrow_icon1">æˆ‘çš„è¡£æŸœ</li>
            <li>|</li>
            <li>å‘¨è¾¹å•†åŸ</li>
            <li>|</li>
            <li class="arrow_icon2">å­£èŠ‚é¢„è§ˆ</li>
            <li>|</li>
            <li>å®¢æœ</li>
            <li>|</li>
            <li>ç½‘ç«™å¯¼èˆª</li>
          </ul>
        </div>
      </div>
    </section>
    <!-- å¿«æ·å¯¼èˆª end -->
    <!-- å¤´éƒ¨æ¨¡å— start -->
    <header class="header w">
      <!-- logo SEOä¼˜åŒ– start-->
      <div class="logo">
        <h1>
          <router-link to="/home" title="å…‰é‡èµç½‘">å…‰é‡èµç½‘</router-link>
        </h1>
      </div>
      <!-- logo SEOä¼˜åŒ– end -->
      <!-- æœç´¢æ¡†ğŸ” start-->
      <div class="search">
        <input type="search" placeholder="é©¯é¾™é«˜æ‰‹" v-model="keyword" />
        <button @click="goSearch">æœç´¢</button>
      </div>
      <!-- æœç´¢æ¡† end -->
      <!-- é«˜é¢‘æœç´¢è¯ start-->
      <div class="hotwords">
        <a href="#" class="style_red">æ— ç¿¼å æœº</a>
        <a href="#">æš´é£é›¨ç›´é£</a>
        <a href="#">å¡çº¢çŸ³é›¨ğŸŒ§ï¸</a>
        <a href="#">éåœ°</a>
        <a href="#">å¤åˆ»ç–¯äº†</a>
      </div>
      <!-- é«˜é¢‘æœç´¢è¯ end -->
      <!-- è´­ç‰©è½¦ start -->
      <router-link to="/shopcar" class="shopcar">
        æˆ‘çš„è´­ç‰©è½¦
        <span class="count">8</span>
      </router-link>
      <!-- è´­ç‰©è½¦ end -->
    </header>
    <!-- å¤´éƒ¨æ¨¡å— end -->
    <!-- å¯¼èˆªæ  start -->
    <nav class="nav">
      <div class="w">
        <!-- ä¸‹æ‹‰èœå• start -->
        <!-- <div class="droptitle">
          <dl>
            <dt>å•†å“åˆ†ç±»</dt>
          </dl>
        </div> -->
        <!-- ä¸‹æ‹‰èœå• end -->
        <!-- è¡£æŸœç»†åˆ† start -->
        <div class="navitems">
          <ul>
            <li><a href="#">è£¤å­ğŸ‘–</a></li>
            <li><a href="#">é¢å…·ğŸ­</a></li>
            <li><a href="#">å‘å‹ğŸ‘§</a></li>
            <li><a href="#">æ–—ç¯·ğŸ½</a></li>
            <li><a href="#">èƒŒé¥°ğŸ¸</a></li>
            <li><a href="#">åŠ¨ä½œğŸ¤¸ğŸ»</a></li>
            <li><a href="#">é­”æ³•ğŸª„</a></li>
            <li><a href="#">å•†èˆ¹ğŸ›¶</a></li>
            <li><a href="#">åŠå…¬å®¤ğŸ¡</a></li>
          </ul>
        </div>
        <!-- è¡£æŸœç»†åˆ† end -->
      </div>
    </nav>
    <!-- å¯¼èˆªæ  end -->
  </div>
</template>

<script>
import Home from "@/pages/Home";
export default {
  name: "Header",
  data() {
    return {
      keyword: "",
    };
  },
  // å¦‚æœç™»é™†æˆåŠŸã€è·å–äº†ç”¨æˆ·ä¿¡æ¯ï¼Œå°±è¦åœ¨å¤´éƒ¨å±•ç¤ºç”¨æˆ·å
  computed: {
    username() {
      return this.$store.state.user.userInfo.name;
    },
  },
  components: {
    Home,
  },
  methods: {
    // è·¯ç”±çš„è·³è½¬--ç¼–ç¨‹å¼å¯¼èˆª
    goSearch() {
      // å­—ç¬¦ä¸²/æ¨¡ç‰ˆå­—ç¬¦ä¸²å†™æ³•
      // this.$router.push(`/search/${this.keyword}?k=${this.keyword.toUpperCase()}`)
      // å¯¹è±¡å†™æ³•ï¼Œparamsè¦å ä½ï¼Œä¸”è¦ç”¨nameä¸èƒ½ç”¨path
      // æ–¹æ³•1
      // let location = {
      //   name: "search",
      //   // path: "/search",
      //   params: {
      //     keyword: this.keyword || undefined,
      //   },
      // };
      // // äº‹å…ˆç‚¹äº†å•†å“åˆ†ç±»ï¼Œè¦å¸¦ä¸Šqueryå‚æ•°
      // if (this.$route.query) {
      //   location.query = this.$route.query;
      // }
      // this.$router.push(location);
      // æ–¹æ³•2
      this.$router.push({
        name: "search",
        // path: "/search",
        params: {
          keyword: this.keyword || undefined,
        },
        query: this.$route.query,
      });
    },
    // é€€å‡ºç™»å½•â€”â€”æ¸…ç†å½“å‰ç”¨æˆ·ç¼“å­˜æ•°æ®ï¼Œè¿”å›ç™»é™†é¡µ
    async logout() {
      try {
        await this.$store.commit("user/LOGOUT");
        // console.log("é€€å‡ºç™»å½•");
        this.$router.push("/");
      } catch (error) {}
    },
  },
  mounted() {
    // åœ¨å…¨å±€äº‹ä»¶æ€»çº¿ä¸Šæ³¨å†Œäº‹ä»¶clearKeyword
    this.$bus.$on("clearKeyword", () => {
      this.keyword = "";
    });
  },
};
</script>

<style >
@font-face {
  font-family: "icomoon";
  src: url("~@/assets/fonts/icomoon.eot?w6zuv8");
  src: url("~@/assets/fonts/icomoon.eot?w6zuv8#iefix")
      format("embedded-opentype"),
    url("~@/assets/fonts/icomoon.ttf?w6zuv8") format("truetype"),
    url("~@/assets/fonts/icomoon.woff?w6zuv8") format("woff"),
    url("~@/assets/fonts/icomoon.svg?w6zuv8#icomoon") format("svg");
  font-weight: normal;
  font-style: normal;
  font-display: block;
}
/* å¿«æ·å¯¼èˆª */
.shortcut {
  height: 30px;
  line-height: 30px;
  background-color: antiquewhite;
}
.fl {
  float: left;
}
.fr {
  float: right;
}
.shortcut li {
  float: left;
}
.shortcut .fr ul li:nth-child(even) {
  width: 1px;
  height: 12px;
  margin: 0 15px;
}
.arrow_icon1::after {
  content: "\e90d";
  font-family: "icomoon";
  margin-left: 6px;
  color: rgb(255, 123, 0);
}
.arrow_icon2::after {
  content: "\e90e";
  font-family: "icomoon";
  margin-left: 6px;
}
/* å¤´éƒ¨åˆ¶ä½œ */
.header {
  position: relative;
  height: 105px;
  background-color: rgba(255, 192, 203, 0.699);
}
.logo {
  position: absolute;
  top: 12px;
  left: 15px;
  width: 75px;
  height: 75px;
}
/* è™½ç„¶é‚£è¾¹å†™çš„æ˜¯router-linkï¼Œä½†æ˜¯æœ€ç»ˆä¼šè½¬æ¢ä¸ºaçš„ï¼Œæ‰€ä»¥æ ·å¼ä¸ä¼šå¤±æ•ˆ */
.logo a {
  display: block;
  width: 75px;
  height: 75px;
  background: url(~@/assets/images/logo.jpeg) no-repeat;
  font-size: 0;
}
/* æœç´¢æ¡† */
.search {
  position: absolute;
  top: 25px;
  left: 350px;
  width: 538px;
  height: 36px;
  border: 2px solid #00a4ff;
}
.search input {
  float: left;
  width: 454px;
  height: 32px;
  padding-left: 10px;
}
.search button {
  float: left;
  width: 80px;
  height: 32px;
  background-color: #00a4ff;
  font-size: 16px;
  color: white;
}
/* é«˜é¢‘è¯ */
.hotwords {
  position: absolute;
  top: 70px;
  left: 350px;
}
.hotwords a {
  margin: 0 15px 0 10px;
  font-size: 12px;
}
/* è´­ç‰©è½¦ */
.shopcar {
  position: absolute;
  right: 60px;
  top: 25px;
  width: 140px;
  height: 35px;
  border: 1px solid #00a4ff;
  line-height: 33px;
  text-align: center;
}
.shopcar::before {
  margin-right: 5px;
  content: "\e90b";
  font-family: "icomoon";
  color: #00a4ff;
}
/* è¿™é‡Œæˆ‘æœ‰ä¸ªå¾ˆå¤§çš„ç–‘é—®ï¼Œä¸ºä»€ä¹ˆpaddingå’ŒmarginæŒ¤ä¸æ‰> */
/* å§æ§½å§æ§½ç ´æ¡ˆå•¦  è¡Œå†…å…ƒç´ è®¾ç½®æ°´å¹³å†…å¤–è¾¹è·æœ‰æ•ˆï¼Œå‚ç›´æ— æ•ˆ*/
.shopcar::after {
  display: line-block;
  margin-left: 10px;
  /* padding-top: 20px; */
  content: "\e910";
  font-family: "icomoon";
}
.shopcar .count {
  position: absolute;
  top: -5px;
  left: 105px;
  height: 14px;
  background-color: #00a4ff;
  line-height: 14px;
  color: #fff;
  padding: 0 5px;
  border-radius: 7px 7px 7px 0;
}
/* å¯¼èˆªæ  */
.nav {
  height: 47px;
  border-bottom: 2px solid #00a4ff;
}
/* è¡£æŸœ */
.nav .navitems {
  float: left;
  margin-left: 25px;
  padding-left: 200px;
}
.navitems ul li {
  float: left;
}
.navitems ul li a {
  display: block;
  height: 45px;
  padding: 0 25px;
  line-height: 45px;
  font-size: 16px;
}
</style>